# 機能 (Features)

Kex は **キーワード (Keywords)** と **スコープ (Scopes)** を通じて、強力なコンテキスト検索機能を提供します。

## キーワード (Keywords)

キーワードは、マークダウン・ドキュメントの Frontmatter で定義される明示的なメタデータです。これらは Kex の主要なインデックスとして機能します。

### 仕組み

1.  **定義**: ドキュメントの Frontmatter の `keywords` フィールドに関連するタグを追加します。
2.  **インデックス**: Kex はキーワードからドキュメントへの逆引きインデックスを構築します。
3.  **検索**: AI エージェント (またはユーザー) が用語を検索すると、Kex はこれらのキーワードに対してマッチングを行います。

### 例

```yaml
---
id: "BUTTON_COMPONENT"
title: "Button Component"
keywords: ["ui", "component", "button", "frontend", "design-system"]
---
```

> **ヒント (Vibe Coding)**: 「react」や「typescript」のような技術用語と、「auth」や「payment」のような概念的な用語を混ぜて使用することで、様々なコンテキストでドキュメントが見つかりやすくなります。

## スコープ (Scopes)

スコープは、ディレクトリ構造から自動的に導出される暗黙的なコンテキストマーカーです。現在の作業コンテキストに基づいて検索結果を **フィルタリング** するために使用されます。

### 仕組み

1.  **ディレクトリ構造**: `contents/` ディレクトリを論理的に整理します。
2.  **導出**: Kex はパス内のすべてのディレクトリ名を「スコープ」として扱います。
3.  **フィルタリング**: 検索時、スコープが提供された場合 (例: ユーザーが現在編集しているファイルから導出される)、Kex は少なくとも1つのスコープを共有するドキュメントのみを含むように結果をフィルタリングします。

### 例

`contents/frontend/components/Button.md` にあるファイルの場合:

- **パス**: `contents/frontend/components/Button.md`
- **導出されたスコープ**: `["frontend", "components"]`

ユーザーが `src/frontend/login.tsx` (これは `frontend` スコープを暗示します) を編集している場合、Kex は `frontend` スコープを持つドキュメントを優先/許可します。

### スコープの共通部分 (Intersection)

検索結果は **スコープの共通部分 (Intersection)** を使用してフィルタリングされます。以下の条件などマッチします:
- **キーワード** がマッチする。
- かつ (スコープが有効な場合)、クエリコンテキストと少なくとも1つの **スコープ** を共有している。

これにより、`backend/` で作業中に「アーキテクチャ」のような一般的な用語を検索すると、バックエンド関連のアーキテクチャドキュメントが (適切にスコープ設定されていれば) 優先されるようになります。
